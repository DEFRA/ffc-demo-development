#!/usr/bin/env sh

##
# Stop script
#
# Stop all services managed by this project.
# Expects each service to have a stop script at `scripts/stop`.
##

set -e
projectRoot=$(a="/$0"; a=${a%/*}; a=${a:-.}; a=${a#/}/; cd "$a/.." || return; pwd)

(
  cd "${projectRoot}"

  services/mine-support/scripts/connected-stop
  services/mine-support-api-gateway/scripts/connected-stop
  services/mine-support-calculation-service/scripts/connected-stop
  services/mine-support-claim-service/scripts/connected-stop
  services/mine-support-payment-service/scripts/connected-stop
  services/mine-support-user-service/scripts/connected-stop
  scripts/stop-core
)
